/**
 * Spotlight.js v0.5.9
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';var aa={};function ba(a){for(var b=a.classList,c={},d=0;d<b.length;d++)c[b[d]]=1;a.a=c;a.c=b}function e(a,b){a=g(a);var c="string"===typeof b;if(a.length)for(var d=0;d<a.length;d++)(c?ca:da)(a[d],b);else(c?ca:da)(a,b)}function da(a,b){for(var c=0;c<b.length;c++)ca(a,b[c])}function ca(a,b){a.a||ba(a);a.a[b]||(a.a[b]=1,a.c.add(b))}function h(a,b){a=g(a);var c="string"===typeof b;if(a.length)for(var d=0;d<a.length;d++)(c?ea:fa)(a[d],b);else(c?ea:fa)(a,b)}
function fa(a,b){for(var c=0;c<b.length;c++)ea(a,b[c])}function ea(a,b){a.a||ba(a);a.a[b]&&(a.a[b]=0,a.c.remove(b))}function k(a,b,c){a=g(a);var d="string"!==typeof b&&Object.keys(b);if(a.length)for(var f=0;f<a.length;f++)(d?ha:ia)(a[f],b,d||c,void 0);else(d?ha:ia)(a,b,d||c,void 0)}function ha(a,b,c,d){for(var f=0;f<c.length;f++){var p=c[f];ia(a,p,b[p],d)}}
function ia(a,b,c,d){var f=a.f;f||(a.f=f={});f[b]!==c&&(f[b]=c,(a.g||(a.g=a.style)).setProperty(aa[b]||(aa[b]=b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()),c,d?"important":null))}var ja=0;function l(a,b,c){k(a,"transition","none");k(a,b,c);ja||(ja=a.clientTop&&0);k(a,"transition","")}function ka(a,b){b||(b="");a=g(a);if(a.length)for(var c=0;c<a.length;c++){var d=a[c],f=b;d.b!==f&&(d.b=f,d.textContent=f)}else a.b!==b&&(a.b=b,a.textContent=b)}
function g(a){return"string"===typeof a?document.querySelectorAll(a):a}function m(a,b){return(b||document).getElementsByClassName(a)};function la(a,b,c,d){ma("add",a,b,c,d)}function na(a,b,c,d){ma("remove",a,b,c,d)}function ma(a,b,c,d,f){b[a+"EventListener"](c||"click",d,"undefined"===typeof f?!0:f)}function n(a,b){a||(a=window.event);a&&(b||a.preventDefault(),a.stopImmediatePropagation(),a.returnValue=!1);return!1};var q="theme fullscreen autofit zoom-in zoom-out page title description player progress".split(" "),r,t,oa,pa,x,y,z,A,B,C,D,E,F,G,H,qa,I,J,L,M,ra,sa,N,O,P,Q,R,ta,ua,va,wa,xa,S,ya,Aa,Ba,Ca,T,Da,U,V,W,Ea;function Fa(a,b,c){this.src=a;this.title=b;this.description=c}
function Ga(a,b){if(J=a.length){P||(P=m("pane",R));var c=P.length,d=L.title,f=L.description;W=Array(J);for(var p=0;p<J;p++){var u=a[p],v=u.dataset;if(p>=c){var w=P[0].cloneNode(!1);k(w,"left",100*p+"%");P[0].parentNode.appendChild(w)}w=void 0;var K=W,fb=p,gb=v&&(v.href||v.src)||u.src||u.href,za;(za=v&&v.title||u.title)||(za=(w=(u||document).getElementsByTagName("img")).length&&w[0].alt);K[fb]=new Fa(gb,za||d||"",v&&v.description||u.description||f||"")}I=b||1;l(N,"transform","translateX(-"+100*(I-
1)+"%)");Ha()}}function Ia(a,b,c,d){if(d||a[c])L[c]=b&&b[c]||d}
function Ja(a,b){L={};b&&Ka(b);Ka(a);Ia(a,b,"description");Ia(a,b,"title");Ia(a,b,"prefetch",!0);Ia(a,b,"preloader",!0);M=L.infinite;M="undefined"!==typeof M&&"false"!==M;ra="false"!==L.progress;sa=1*L.player||7E3;if((a=L.zoom)||""===a)L["zoom-in"]=L["zoom-out"]=a,delete L.zoom;if((a=L.control)||""===a){a="string"===typeof a?a.split(","):a;for(b=0;b<q.length;b++)L[q[b]]="false";for(b=0;b<a.length;b++){var c=a[b].trim();"zoom"===c?L["zoom-in"]=L["zoom-out"]="true":L[c]="true"}}for(a=0;a<q.length;a++)b=
q[a],k(m(b,R)[0],"display","false"===L[b]?"none":"");(qa=L.theme)?La():qa="white"}function Ka(a){for(var b=L,c=Object.keys(a),d=0;d<c.length;d++){var f=c[d];b[f]=""+a[f]}}
function Ma(){var a=I;O=P[a-1];Q=O.firstElementChild;I=a;if(!Q){var b="false"!==L.preloader;Q=new Image;Q.onload=function(){b&&h(Ca,"show");W&&(z=this.width,A=this.height,k(this,{visibility:"visible",opacity:1,transform:""}),"false"!==L.prefetch&&a<J&&((new Image).src=W[a].src))};Q.onerror=function(){O.removeChild(this)};O.appendChild(Q);Q.src=W[a-1].src;b&&e(Ca,"show");return!b}return!0}la(document,"",Na);
la(document,"DOMContentLoaded",function(){R=document.createElement("div");R.id="spotlight";R.innerHTML='<div class=drag></div><div class=preloader></div><div class=scene><div class=pane></div></div><div class=header><div class=page></div><div class="icon fullscreen"></div><div class="icon autofit"></div><div class="icon zoom-out"></div><div class="icon zoom-in"></div><div class="icon theme"></div><div class="icon player"></div><div class="icon close"></div></div><div class=progress></div><div class="arrow arrow-left"></div><div class="arrow arrow-right"></div><div class=footer><div class=title></div><div class=description></div></div>';
k(R,"transition","none");document.body.appendChild(R);N=m("scene",R)[0];ta=m("footer",R)[0];ua=m("title",ta)[0];va=m("description",ta)[0];wa=m("arrow-left",R)[0];xa=m("arrow-right",R)[0];S=m("fullscreen",R)[0];ya=m("page",R)[0];Aa=m("player",R)[0];Ba=m("progress",R)[0];Ca=m("preloader",R)[0];V=document.documentElement||document.body;document.cancelFullScreen||(document.cancelFullScreen=document.exitFullscreen||document.webkitCancelFullScreen||document.webkitExitFullscreen||document.mozCancelFullScreen||
function(){});V.requestFullScreen||(V.requestFullScreen=V.webkitRequestFullScreen||V.msRequestFullScreen||V.mozRequestFullScreen||k(S,"display","none")||function(){});var a=m("drag",R)[0];Ea=[[window,"keydown",Oa],[window,"wheel",Pa],[window,"hashchange",Qa],[window,"resize",Ra],[a,"mousedown",Sa],[a,"mouseleave",Ta],[a,"mouseup",Ta],[a,"mousemove",Ua],[a,"touchstart",Sa,{passive:!1}],[a,"touchcancel",Ta],[a,"touchend",Ta],[a,"touchmove",Ua,{passive:!0}],[S,"",Va],[wa,"",Wa],[xa,"",X],[Aa,"",Xa],
[m("autofit",R)[0],"",Ya],[m("zoom-in",R)[0],"",Za],[m("zoom-out",R)[0],"",$a],[m("close",R)[0],"",ab],[m("theme",R)[0],"",La]]},{once:!0});function Ra(){x=R.clientWidth;y=R.clientHeight;Q&&(z=Q.width,A=Q.height,bb())}function bb(){k(Q,"transform","translate(-50%, -50%) scale("+B+")")}function cb(a){for(var b=0;b<Ea.length;b++){var c=Ea[b];(a?la:na)(c[0],c[1],c[2],c[3])}}
function Na(a){var b=db.call(a.target,".spotlight");if(b){var c=db.call(b,".spotlight-group"),d=m("spotlight",c);Ja(b.dataset,c&&c.dataset);for(c=0;c<d.length;c++)if(d[c]===b){Ga(d,c+1);break}eb();return n(a)}}function Oa(a){if(O)switch(a.keyCode){case 8:Ya();break;case 27:ab();break;case 32:"false"!==L.player&&Xa();break;case 37:Wa();break;case 39:X();break;case 38:case 107:case 187:Za();break;case 40:case 109:case 189:$a()}}function Pa(a){O&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?$a():Za())}
function Qa(){O&&"#spotlight"===location.hash&&ab(!0)}function Xa(a){("boolean"===typeof a?a:!T)?T||(T=setInterval(X,sa),e(Aa,"on"),ra&&hb()):T&&(T=clearInterval(T),h(Aa,"on"),ra&&l(Ba,"transform",""));return T}function Y(){U?clearTimeout(U):e(R,"menu");var a=L.autohide;U="false"!==a?setTimeout(function(){h(R,"menu");U=null},1*a||3E3):1}function ib(a){"boolean"===typeof a&&(U=a?U:0);U?(U=clearTimeout(U),h(R,"menu")):Y();return n(a)}
function Sa(a){C=!0;D=!1;var b=jb(a);E=z*B<=x;oa=b.x;pa=b.y;return n(a,!0)}function Ta(a){if(C&&!D)return C=!1,ib(a);E&&D&&(l(N,"transform","translateX("+-(100*(I-1)-r/x*100)+"%)"),r<-(y/10)&&X()||r>y/10&&Wa()||k(N,"transform","translateX(-"+100*(I-1)+"%)"),r=0,E=!1,k(O,"transform",""));C=!1;return n(a)}
function Ua(a){if(C){Da||(Da=requestAnimationFrame(kb));var b=jb(a),c=(z*B-x)/2;D=!0;r-=oa-(oa=b.x);E?F=!0:r>c?r=c:0<x-r-z*B+c?r=x-z*B+c:F=!0;A*B>y&&(c=(A*B-y)/2,t-=pa-(pa=b.y),t>c?t=c:0<y-t-A*B+c?t=y-A*B+c:F=!0)}else Y();return n(a,!0)}function jb(a){var b=a.touches;b&&(b=b[0]);return{x:b?b.clientX:a.pageX,y:b?b.clientY:a.pageY}}function kb(a){F?(a&&(Da=requestAnimationFrame(kb)),k(O,"transform","translate("+r+"px, "+t+"px)")):Da=null;F=!1}
function Va(a){("boolean"===typeof a?a:document.isFullScreen||document.webkitIsFullScreen||document.mozFullScreen)?(document.cancelFullScreen(),h(S,"on")):(V.requestFullScreen(),e(S,"on"))}function Ya(a){"boolean"===typeof a&&(G=!a);G=1===B&&!G;k(Q,{maxHeight:G?"none":"",maxWidth:G?"none":"",transform:""});z=Q.width;A=Q.height;B=1;t=r=0;F=!0;kb();Y()}function Za(a){var b=B/.65;5>=b&&lb(B=b);a||Y()}function lb(a){B=a||1;bb()}function $a(a){var b=.65*B;1<=b&&(lb(B=b),t=r=0,F=!0,kb());a||Y()}
function eb(){location.hash="spotlight";location.hash="show";k(R,"transition","");e(V,"hide-scrollbars");e(R,"show");cb(!0);Ra();Y()}function ab(a){cb(!1);history.go(!0===a?-1:-2);h(V,"hide-scrollbars");h(R,"show");T&&Xa(!1);Q.parentNode.removeChild(Q);O=Q=W=null}function Wa(){if(1<I)return Z(I-1);if(T||M)return Z(J)}function X(){if(I<J)return Z(I+1);if(T||M)return Z(1)}function Z(a){if(!(T&&C||a===I)){T||Y();T&&ra&&hb();var b=a>I;I=a;Ha(b);return!0}}
function hb(){l(Ba,{transitionDuration:"",transform:""});k(Ba,{transitionDuration:sa+"ms",transform:"translateX(0)"})}function La(a){"boolean"===typeof a?H=a:(H=!H,Y());H?e(R,qa):h(R,qa)}
function Ha(a){t=r=0;B=1;var b=L.animation,c=!0,d=!0,f=!0;if(b||""===b){c=d=f=!1;b="string"===typeof b?b.split(","):b;for(var p=0;p<b.length;p++){var u=b[p].trim();if("scale"===u)c=!0;else if("fade"===u)d=!0;else if("slide"===u)f=!0;else if("flip"===u)var v=!0;else if("false"!==u){c=d=f=v=!1;var w=u;break}}}k(N,{transition:f?"":"none",transform:"translateX(-"+100*(I-1)+"%)"});O&&k(O,"transform","");if(Q){k(Q,{opacity:d?0:1,transform:""});var K=Q;setTimeout(function(){K&&Q!==K&&K.parentNode&&K.parentNode.removeChild(K)},
800)}f=Ma();w&&e(Q,w);l(Q,{opacity:d?0:1,transform:"translate(-50%, -50%)"+(c?" scale(0.8)":"")+(v&&"undefined"!==typeof a?" rotateY("+(a?"":"-")+"90deg)":""),maxHeight:"",maxWidth:""});f&&k(Q,{visibility:"visible",opacity:1,transform:""});w&&h(Q,w);k(O,"transform","");k(wa,"visibility",M||1!==I?"":"hidden");k(xa,"visibility",M||I!==J?"":"hidden");a=W[I-1];if(c=a.title||a.description)ka(ua,a.title),ka(va,a.description);k(ta,"visibility",c?"visible":"hidden");ka(ya,I+" / "+J)}
var db=Element.prototype.closest||function(a){var b=this;for(a=a.substring(1);b&&1===b.nodeType;){if(b.classList.contains(a))return b;b=b.parentElement||b.parentNode}};window.Spotlight={theme:La,fullscreen:Va,autofit:Ya,next:X,prev:Wa,"goto":Z,close:ab,zoom:lb,menu:ib,show:function(a,b){setTimeout(function(){a?(b?Ja(b):b={},Ga(a,b.index)):L={};eb()})},play:Xa};}).call(this);
