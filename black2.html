<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script src="https://lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<textarea name="" id="sub" cols="30" rows="10">
0000000000
0000000000
0000000000
0000000000
0000000000
0000000000
0000000000
0000000000
0000000000
0000000000
=
11111111111
11111111111
11111111111
11111111111
11111111111
11111111111
11111111111
11111111111
11111111111
=
000001111100000
000001111100000
000001111100000
111111111111111
111111111111111
111111111111111
000001111100000
000001111100000
000001111100000
=
1010101010
0101010101
1010101010
0101010101
1010101010
0101010101
1010101010
0101010101
1010101010
0101010101
=
100000000
111111110
000000000
011111111
000000000
111111110
000000000
011111111
000000000
=
10000000
01111110
01000000
01000100
00011100
=
111111111
111111111
111111111
111111111
111111111
111111111
111111110
=
11111111
11111111
11111000
11111000
11110000
11110000
11110000
=
1111111111
1101110111
1111111110
1011101111
1111111111
1101011111
1111111101
=
0100000000
0100100001
0011000001
0100100010
0100011000
0000000010
0000010011
0000001000
0000000000
0100100001
=
1101011111
0011110011
1001110111
1111101111
0111100111
1111110111
1011111011
1111111011
1011100111
1111111111
=
0101100101
0001001110
0100100011
0100001101
1100010101
1101010001
1011110101
0101011110
1010011100
1111010111
=
01111111111111110
10111111111111101
11011111111111011
11101111111110111
11110111111101111
11111011111011111
11111101110111111
11111110101111111
11111111011111111
11111110101111111
11111101110111111
11111011111011111
11110111111101111
11101111111110111
11011111111111011
10111111111111101
01111111111111110
=
11111111111111111111
11111111111111111111
11111111010101011011
11100101110111010111
11110101101010101111
11001010101010100111
11011011010101100011
11110100100100100111
11111100101001011111
11111111001010111111
11111111111111111111
11111111111111111111
=
00000000000000000
00000000000000000
00000110101011000
00010101010110100
00101010101010100
01101010101101010
00010101001001000
00101010110101000
00000101010100100
00000001011000000
00000000000000000
00000000000000000
=
111111111010101001
111111111100100101
111111111001010010
111111111101000101
111111111100101000
000010100111111111
011010100111111111
001001001111111111
011101001111111111
010100101111111111
=
10110111111111111110111001010111110111111011111111
01110111110111110111110100111101010011111110111011
11111111011001111101110011111110001110101110011111
11111111110100111101111111111111110111111101000010
11101111111111111111110111101111110111011111101101
10000111111011110111111110000101111111101011111111
11110111101111011110111011110110111111010111101011
11100111111111111011111111111101011111111111101011
11110111111111111111111111111110111110011111111111
11110111111101111111111111111111111101111101111011
11111111111111110111011110011111110011011111101110
10001010111011111111110101100111111100111011011101
01110111111111110111111101110111110111111101101111
00111110110010100100110110101111111011011111111110
01111111111110110110111110111111110111111011110111
01111111111011111110111011111111110111111111001110
11111110110110011100111110111110111111111111111011
11101001001101101011111110111111101111111111011111
01111111111111111111111010101111101011011111011111
11111111110001101110111111010110111111111111111111
11111100110111101111111111110011011101111111010111
11110101111110101111011111101001110001111111111010
11111111011111101111111101101010111111111111001110
11110111101101111111101111110111111111011111111111
11100111010111010110011111011111011100101110110111
10110011101011111111101111101101101000111110111111
11011111100011110011110011110111101101111111101111
11001111111111111111101111101101101111110110111101
11111111101110001111100100111011111110111111010011
11111111111011110111011110111010111011111111111111
10101101011111001111111111111111100111011011111011
11010101011111001111011110111111110111111101111101
11111111110100111101011001111110101111101011011111
10100110111011111111111111111011111111100100001111
11110011001011111101111101111101011111111111111000
11111111100111111101111101000100111111001111011110
00110011101111111000010111110111111110111011111111
01101111110010001101101111110111111111111101111100
11111111111011111111101111111101111011101111101110
01111111011111011111111110011111111111110111111111
11111111111010111110011111111010011111111111011111
10111111111011111110111111111011111111011110111101
10110111111100111111011101111111101111111011101001
01101110111111101110000111111101111101010000001100
01111110111101101111111011110011111111111111111111
11111111111101110111111111110111101011111111011110
11111111110111101101111110001100111101011111111101
10111110110111011101111111110111110110101101101101
11111011110101110011011111101111111101111110111111
11111011111101111101111111111111101101011111110111
=
00000000100001001001000100001011001000000000000000
00000000010010100000000000100000011001110000000000
01000000100001000100010000000000010100110100001000
01000100000001000000000000000000010001010000000010
01000110100010000100100100010000000001000011001000
00011100000000001000000001000000001011100000010000
00000001100000000110000000000000000100001101000011
00001010000100000000100000000011000000000100000000
00000100100100110000000000000001000000100110000011
00000001000000000000000000010100000000100000001110
00000000000000010000000000000010001010000001100010
00001000100001010000000100000011001000001000000010
10000000000100000100010000100000010001100000011010
00000100001000000001000000001000000000000001000000
00000000011000110001010110010100000101000100000110
00000000110010010000000000001000000000010000011000
00000000100111000010100010011100000001010000001001
00000010001000010011000000001010100001011100011000
10001001010001010000000001001000000000100000010000
00000000001010010000000001010000000001010000000000
00001000000000000010010110000100000000000100011000
00001000000100000001000100000100000000100000011110
01100000000100000000000000001100000110000000110001
10001000010000011010001010110010000000000001110000
01000011000100001000000011100000010000100000011001
00001101010000100000000000100010000000100110000100
00010011100111000100010010100110000000000000001001
00000001000000001001000000001010110011010000000010
00000100000101000001010001001100101010000100000000
10000010100010100001011100100000100000000000000000
00110100000001010010000000000001000100000001100010
00000010100000000000000000100000010100000001000001
00000000000000000000010001000000100000000011010000
10100000010010000001000000000011001001100001010010
11000100100000000000001110001101000000100001010000
00010100010000010000000000100000000001000000000000
10010000001000000000100101010100100000001000000000
00000000000000000000100000010000100100000000000000
00000000000001000001000000111000000000000010000011
00001100100001000000111000010000000000000000000010
00000001000111101100001110010000000000100000000000
00001000010000100000000000000000000100000010000000
00010000000010000100000000010000010000000100000001
00000001000000001010100000010000001000010001100000
10100001000000010010001000001100010000000010000000
01000000000100100000110010000010000011001000000000
10010101100000010010110000000000001000010001011100
00001101010000100001000000000010010010000001000010
10101100000000000010000000010101010100001000000100
00000001001011010010000010100111000000001001000000
=
01111110010100010100001001010101011001110100011011
01010110011001000101010110011010011000011000101101
00111001001010000110111111000010010100110100101100
00110111010011001011010110101110011010001011011110
01100110101111100010000001111011101001110011101011
11100100001101000110100100000111111110100100101110
11100100111110100001100000110000110101001111011010
01110111010110110101101101001000101011110011110101
01010000101111111011010100010001101010001110111011
10101000101111000101001001110111000001100101010011
01001010101100001000101110010100000000110101101110
10001111011000000000000011110111010001101100000010
11000010111000010101010010011011010110001101011000
01000001100001100100100011111101101100100110000100
10100110000100010000101111000101011100110000100100
11010011101111101101110101111001011111000111001000
10101100000000011000100100111110001011100111111000
11011001001110011110110110000010100010100101111001
10011001010101011111111011101101001110001111011010
10100011001110001001111100100100111111110000100001
00000001001110101000100000010101111001100010111000
00101101111110101101001100100110101010100101001001
10001011010100101101110011101100000100111011011101
00100010000000001111000010011001101101110000001001
10010111001100011101010011001011110011010001000011
10111100111010110001110100011100000000011111001010
00010111001011111000111110101010110100001101111000
10000010100000111111101010101110100111110010001110
01011000000011101001110110001011101011100011100101
10001001110100011110010100011010110100111011011111
01110111010111001101011111100110010000110111010100
00101010101110000100010011001111011000011011000110
01100000111101100011111111001100010000111010010010
01011011100110111011100010101110011111111000100011
00111000011111011001001111101000111111110010111101
00001100100110110100101111010100001011101101110000
10010111010100111101101110111111010000011010010101
00001100101011010111110111010010001010101110101000
00110101011101010001001010000001101011110111100010
11100110001110101100010000110011010010110001000111
10110111011011100000011010001101000011001011001111
10110101001010101011100101001101011010011100100101
10010011100001110100010001110000100101101111011001
01101010111111100011000111111111100000100110101011
00110110100110011010010010000000101011001101010011
00000000011000100100101001100110001110100001101101
01111001100010110011100001101011110111010101101101
10101001000001111101111011110010110110000110110000
00101001010100100101010011100001111000000011101110
10101001010101011100000011111000001100011111101011</textarea>
<div id="daan"></div>

<body>

    <script>
        document.write("浏览器代号: " + navigator.appCodeName);
        var subject = $("#sub").val();
        var arr = subject.split(/[=]/);

        function handle(sub, index) {
            if (index == 0) {
                return "rrrrrrrrrdddddddddlllllllllurrrrrrrrullllllllurrrrrrrrullllllllurrrrrrrrullllllllurrrrrrrrullllllllu";
            }
            var newArr = new Array;
            //剔除题干的左右无意义字符
            var arr1 = $.trim(sub).split(/[\n]/);
            //获取本题完整table
            arr1.forEach(function(v, i) {
                newArr.push(v.split(""));
            });
            var old = (sub.split("0")).length - 1;
            if (old == 0) return "";
            //起始坐标i=横向下标 j=竖排坐标
            var i = j = 0;
            // console.table(newArr);
            var max = 0;
            newArr.forEach(function(v, i) {
                max++;
            });
            //获取横竖最大下标个数
            var x = 0;
            newArr[0].forEach(function(v, i) {
                x++;
            });

            if (index > 10) {
                return allGoThreeLine(newArr, x - 1, max - 1);
            }
            return allGo2(newArr, x - 1, max - 1);
        }

        function allGoThreeLine(newArr, x, y) {
            var str = "";
            var i = 0; //行索引
            var j = 0; //列索引
            //走到第二行
            str += "d";
            j++;
            newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
            var num = 0;
            var direction = "right";

            while (j <= y) {
                if (newArr[j - 1][i] == "0") {
                    str += "ud";
                    newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                    newArr[j - 1][i] = "1";
                }
                var target = newArr[j - 1].indexOf("0");
                if (target == -1 && j < y) { //说明上一行没有0,直接下移
                    j++;
                    str += "d";
                    newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                }

                while (i <= x && i >= 0) {
                    num++;
                    if (num > 50000) {
                        break;
                    }
                    if (newArr[j - 1][i] == "0") { //判断上面
                        str += "ud";
                        newArr[j - 1][i] = "1";
                        newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                    }
                    if (j != y && newArr[j + 1][i] != undefined && newArr[j + 1][i] == "0") { //判断下面
                        str += "du";
                        newArr[j + 1][i] = "1";
                        newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                    }
                    if (direction == "right") { //判断方向 等于1为向右,即++;
                        if (i > 0 && newArr[j][i - 1] == "0") { //判断屁股后面
                            str += "lr";
                            newArr[j][i - 1] = "1";
                            newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                        }
                    } else { //判断方向 不等于1为向左,即--;
                        if (i < x && newArr[j][i + 1] == "0") { //判断屁股后面
                            str += "rl";
                            newArr[j][i + 1] = "1";
                            newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                        }
                    }
                    if (direction == "right") { //等于1为向右,即++;
                        str += "r";
                        i++; //10
                    } else { //等于0为向左,即++;
                        str += "l";
                        i--;
                    }
                    newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";

                    if (i == x || i == 0) { //走到最后面9<10
                        if (newArr[j - 1][i] == "0") { //判断上面
                            str += "ud";
                            newArr[j - 1][i] = "1";
                            newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                        }
                        if (direction == "right") { //判断方向 等于1为向右,即++;
                            if (i > 0 && newArr[j][i - 1] == "0") { //判断屁股后面
                                str += "lr";
                                newArr[j][i - 1] = "1";
                                newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                            }
                        } else { //判断方向 不等于1为向左,即--;
                            if (i < x && newArr[j][i + 1] == "0") { //判断屁股后面
                                str += "rl";
                                newArr[j][i + 1] = "1";
                                newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                            }
                        }
                        break
                    }
                }

                if (y == j) { //如果是最后一行
                    if (newArr[j][i] == "0") {
                        str += "udu";
                        newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                    }
                    break;
                }
                if (i == 0 || i == x) {
                    //处理下移逻辑j=1
                    j++;
                    //2
                    str += "d";
                    newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                    //判断刚才位置
                    if (newArr[j - 1][i] == "0") {
                        str += "ud";
                        newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                        newArr[j - 1][i] = "1";
                    }
                    //3
                    if (j < y) {
                        j++;
                        str += "d";
                        newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                        //判断上面
                        if (newArr[j - 1][i] == "0") {
                            str += "ud";
                            newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                            newArr[j - 1][i] = "1";
                        }
                        if (j < y) {
                            //4
                            j++;
                            str += "d";
                            newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                            if (newArr[j - 1][i] == "0") { //判断上面
                                str += "ud";
                                newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                                newArr[j - 1][i] = "1";
                            }
                            if (j < y) {
                                if (newArr[j + 1][i] == "0") { //判断下一排的下面
                                    str += "du";
                                    newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                                    newArr[j + 1][i] = "1";
                                }
                            }

                        }
                    }
                }

                if (i == x) { //走到最右
                    str += "l";
                    i--;
                    newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                }
                if (i == 0) { //走到最左
                    str += "r";
                    i++;
                    newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                }
                //改变方向
                direction = direction == "right" ? "left" : "right";
            }

            console.table(newArr);
            return str;

            //处理下移逻辑
        }

        //所有位置都走一遍
        function allGo2(newArr, x, y) {
            var str = "";
            var i = 0;
            for (var j = 0; j <= y; j++) { //行处理
                if (j != 0) {
                    newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                }
                var target = newArr[j].indexOf("0");
                var z = 0;
                var num = isZoreNum(arr);
                while (target != -1) {
                    z++
                    if (z > 200000) {
                        return str;
                    }
                    if (i == target) { //往左
                        if (i == x) {
                            i--;
                            str += "l";
                            newArr[j][i] = newArr[j][i] == 1 ? "0" : "1";
                        } else {
                            i++;
                            str += "r";
                            newArr[j][i] = newArr[j][i] == 1 ? "0" : "1";
                        }
                    }
                    if (target > i) { //往右
                        i++;
                        str += "r";
                        newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                    }
                    if (target < i) { //往左
                        i--;
                        str += "l";
                        newArr[j][i] = newArr[j][i] == "1" ? "0" : "1";
                    }
                    target = newArr[j].indexOf("0");
                    // console.log(newArr[j]);
                }
                if (j != y) {
                    str += "d";
                }
            }
            // console.table(newArr);
            return str;
        }

        function isZoreNum(arr) {
            var num = 0;
            arr.forEach(function(v, i) {
                if (v == "0") num++;
            });
            return num;
        }


        function go(newArr, j, i, target) {

        }
        //邻居判断是否走 
        function isNearGo(arr, i, j, x, y) {

        }



        var daan = [];
        arr.forEach(function(v, i) {
            var re = handle(v, i);
            daan.push(re);
        });
        // console.log(arr[10]);
        console.log(daan.join("\n"));
        $("#daan").html(daan.join("\n"));
        // var test = handle(arr[0]);
        // console.log(test);
        //2018-11
    </script>
</body>

</html>